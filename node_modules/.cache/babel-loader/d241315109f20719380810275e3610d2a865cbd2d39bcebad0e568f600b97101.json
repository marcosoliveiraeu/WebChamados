{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrador\\\\Documents\\\\GitHub\\\\WebChamados\\\\WebChamados\\\\React\\\\chamadosreact\\\\src\\\\components\\\\PrivateAdminRoute.jsx\";\nimport React from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\nimport { accessToken, refreshValido, getNewRefreshToken } from '../utils/UserToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateAdminRoute = () => {\n  let isAuthenticated = false;\n  let isAdmin = false;\n  let token = accessToken();\n  if (token) {\n    //se existir um token no storage      \n\n    if (token.isExp) {\n      //se o access token do storage est치 expirado   \n\n      if (refreshValido()) {\n        // se o refresh for v치lido            \n\n        //busca novos tokens usando o refresh token\n        getNewRefreshToken();\n        token = accessToken();\n        isAdmin = token.role === 'Admin' ? true : false;\n        isAuthenticated = true;\n      }\n    } else {\n      isAdmin = token.role === 'Admin' ? true : false;\n      isAuthenticated = true;\n    }\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 12\n    }, this);\n  } else if (!isAdmin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/chamados\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 12\n    }, this);\n  }\n};\n_c = PrivateAdminRoute;\nexport default PrivateAdminRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateAdminRoute\");","map":{"version":3,"names":["React","Navigate","Outlet","accessToken","refreshValido","getNewRefreshToken","jsxDEV","_jsxDEV","PrivateAdminRoute","isAuthenticated","isAdmin","token","isExp","role","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Administrador/Documents/GitHub/WebChamados/WebChamados/React/chamadosreact/src/components/PrivateAdminRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\nimport {accessToken , refreshValido , getNewRefreshToken} from '../utils/UserToken';\r\n\r\nconst PrivateAdminRoute = () => {\r\n    \r\n  let isAuthenticated = false;\r\n  let isAdmin = false;\r\n\r\n  let token = accessToken();\r\n\r\n  if(token){\r\n    //se existir um token no storage      \r\n    \r\n        if(token.isExp){\r\n        //se o access token do storage est치 expirado   \r\n            \r\n            if(refreshValido()){\r\n            // se o refresh for v치lido            \r\n            \r\n                //busca novos tokens usando o refresh token\r\n                getNewRefreshToken();\r\n\r\n                token = accessToken();\r\n\r\n                isAdmin = token.role === 'Admin' ? true : false;\r\n                isAuthenticated = true;\r\n            }        \r\n\r\n        }\r\n        else\r\n        {\r\n          isAdmin = token.role === 'Admin' ? true : false;\r\n          isAuthenticated = true;\r\n        }\r\n  }\r\n\r\n  if (!isAuthenticated){\r\n    return <Navigate to=\"/login\" />\r\n  }else if(!isAdmin){\r\n    return <Navigate to=\"/chamados\" />\r\n  }else{\r\n    return <Outlet />\r\n  }\r\n \r\n};\r\n\r\nexport default PrivateAdminRoute;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,MAAM,QAAQ,kBAAkB;AACnD,SAAQC,WAAW,EAAGC,aAAa,EAAGC,kBAAkB,QAAO,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpF,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAE9B,IAAIC,eAAe,GAAG,KAAK;EAC3B,IAAIC,OAAO,GAAG,KAAK;EAEnB,IAAIC,KAAK,GAAGR,WAAW,CAAC,CAAC;EAEzB,IAAGQ,KAAK,EAAC;IACP;;IAEI,IAAGA,KAAK,CAACC,KAAK,EAAC;MACf;;MAEI,IAAGR,aAAa,CAAC,CAAC,EAAC;QACnB;;QAEI;QACAC,kBAAkB,CAAC,CAAC;QAEpBM,KAAK,GAAGR,WAAW,CAAC,CAAC;QAErBO,OAAO,GAAGC,KAAK,CAACE,IAAI,KAAK,OAAO,GAAG,IAAI,GAAG,KAAK;QAC/CJ,eAAe,GAAG,IAAI;MAC1B;IAEJ,CAAC,MAED;MACEC,OAAO,GAAGC,KAAK,CAACE,IAAI,KAAK,OAAO,GAAG,IAAI,GAAG,KAAK;MAC/CJ,eAAe,GAAG,IAAI;IACxB;EACN;EAEA,IAAI,CAACA,eAAe,EAAC;IACnB,oBAAOF,OAAA,CAACN,QAAQ;MAACa,EAAE,EAAC;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACjC,CAAC,MAAK,IAAG,CAACR,OAAO,EAAC;IAChB,oBAAOH,OAAA,CAACN,QAAQ;MAACa,EAAE,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC,CAAC,MAAI;IACH,oBAAOX,OAAA,CAACL,MAAM;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACnB;AAEF,CAAC;AAACC,EAAA,GAzCIX,iBAAiB;AA2CvB,eAAeA,iBAAiB;AAAC,IAAAW,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}